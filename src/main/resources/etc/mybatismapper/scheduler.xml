<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="scheduler">

	<cache />




	<select id="selectScheduler" resultType="org.uario.seaworkengine.model.Scheduler"
		parameterType="map">
	<![CDATA[
		select s.id,
		s.date_scheduler,s.note, s.from_ts, s.to_ts, s.editor,
		s.controller,
		s.initial_shift_1, s.initial_shift_2, s.initial_shift_3,
		s.initial_shift_4,
		s.final_shift_1, s.final_shift_2, s.final_shift_3,
		s.final_shift_4, s.initial_time_1,
		s.initial_time_2,
		s.initial_time_3, s.initial_time_4, s.final_time_1,
		s.final_time_2, s.final_time_3, s.final_time_4,
		u.employee_identification, u.id as scheduled,
		concat(u.firstname,u.lastname) as name_scheduled
		from
		user u
		left join
		scheduler s on (u.id = s.scheduled and (s.date_scheduler >=
		#{date_from} and s.date_scheduler <= #{date_to})) order by scheduled asc, s.date_scheduler asc;
]]>
	</select>

	<insert id="save" parameterType="org.uario.seaworkengine.model.Scheduler">
		INSERT INTO scheduler
		(date_scheduler,note, from_ts, to_ts, editor,
		controller,
		initial_shift_1, initial_shift_2, initial_shift_3,
		initial_shift_4,
		final_shift_1, final_shift_2, final_shift_3,
		final_shift_4,
		initial_time_1,
		initial_time_2,
		initial_time_3,
		initial_time_4,
		final_time_1,
		final_time_2,
		final_time_3, final_time_4, scheduled)
		VALUE
		(#{date_scheduler},#{note}, #{from_ts}, #{to_ts}, #{editor},
		#{controller},
		#{initial_shift_1}, #{initial_shift_2},
		#{initial_shift_3},
		#{initial_shift_4},
		#{final_shift_1},
		#{final_shift_2}, #{final_shift_3},
		#{final_shift_4},
		#{initial_time_1},
		#{initial_time_2},
		#{initial_time_3},
		#{initial_time_4}, #{final_time_1},
		#{final_time_2},
		#{final_time_3},
		#{final_time_4},
		#{scheduled})


	</insert>

	<update id="update" parameterType="org.uario.seaworkengine.model.Scheduler">

		UPDATE scheduler set
		date_scheduler = #{date_scheduler}, note = #{note}, from_ts =
		#{from_ts}, to_ts =
		#{to_ts}, editor = #{editor},
		controller =
		#{controller},
		initial_shift_1 = #{initial_shift_1}, initial_shift_2 =
		#{initial_shift_2}, initial_shift_3 = #{initial_shift_3},
		initial_shift_4 =
		#{initial_shift_4},
		final_shift_1 = #{final_shift_1}, final_shift_2 =
		#{final_shift_2}, final_shift_3 = #{final_shift_3},
		final_shift_4 =
		#{final_shift_4},
		initial_time_1 = #{initial_time_1},
		initial_time_2 = #{initial_time_2},
		initial_time_3 =
		#{initial_time_3},
		initial_time_4 = #{initial_time_4},
		final_time_1 = #{final_time_1},
		final_time_2 =
		#{final_time_2},
		final_time_3 = #{final_time_3},
		final_time_4 = #{final_time_4},
		scheduled =
		#{scheduled}
		where
		id = #{id}

	</update>





</mapper>


