<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="scheduler">

	<cache />




	<select id="selectScheduler" resultType="org.uario.seaworkengine.model.Scheduler"
		parameterType="map">
	<![CDATA[
		select s.id,
		s.date_scheduler,s.note, s.from_ts, s.to_ts, s.editor,
		s.controller,
		s.initial_task_1, s.initial_task_2, s.initial_task_3,
		s.initial_task_4,
		s.final_task_1, s.final_task_2, s.final_task_3,
		s.final_task_4, s.initial_time_task_1,
		s.initial_time_task_2,
		s.initial_time_task_3, s.initial_time_task_4, s.final_time_task_1,
		s.final_time_task_2, s.final_time_task_3, s.final_time_task_4,
		u.employee_identification, u.id as id_scheduled,
		concat(u.firstname,u.lastname) as name_scheduled
		from
		user u
		left join
		scheduler s on (u.id = s.scheduled and (s.date_scheduler >=
		#{date_from} and s.date_scheduler <= #{date_to}));
]]>
	</select>

	<insert id="save" parameterType="org.uario.seaworkengine.model.Scheduler">
		INSERT INTO scheduler
		(date_scheduler,note, from_ts, to_ts, editor,
		controller,
		initial_task_1, initial_task_2, initial_task_3,
		initial_task_4,
		final_task_1, final_task_2, final_task_3,
		final_task_4,
		initial_time_task_1,
		initial_time_task_2,
		initial_time_task_3,
		initial_time_task_4, final_time_task_1,
		final_time_task_2,
		final_time_task_3, final_time_task_4, scheduled)
		VALUE
		(#{date_scheduler},#{note}, #{from_ts}, #{to_ts}, #{editor},
		#{controller},
		#{initial_task_1}, #{initial_task_2}, #{initial_task_3},
		#{initial_task_4},
		#{final_task_1}, #{final_task_2}, #{final_task_3},
		#{final_task_4},
		#{initial_time_task_1},
		#{initial_time_task_2},
		#{initial_time_task_3},
		#{initial_time_task_4}, #{final_time_task_1},
		#{final_time_task_2},
		#{final_time_task_3}, #{final_time_task_4},
		#{id_scheduled})


	</insert>

	<update id="update" parameterType="org.uario.seaworkengine.model.Scheduler">

		UPDATE scheduler set
		date_scheduler = #{date_scheduler}, note = #{note}, from_ts =
		#{from_ts}, to_ts =
		#{to_ts}, editor = #{editor},
		controller =
		#{controller},
		initial_task_1 = #{initial_task_1}, initial_task_2 =
		#{initial_task_2}, initial_task_3 = #{initial_task_3},
		initial_task_4 =
		#{initial_task_4},
		final_task_1 = #{final_task_1}, final_task_2 =
		#{final_task_2}, final_task_3 = #{final_task_3},
		final_task_4 =
		#{final_task_4},
		initial_time_task_1 = #{initial_time_task_1},
		initial_time_task_2 = #{initial_time_task_2},
		initial_time_task_3 =
		#{initial_time_task_3},
		initial_time_task_4 = #{initial_time_task_4},
		final_time_task_1 = #{final_time_task_1},
		final_time_task_2 =
		#{final_time_task_2},
		final_time_task_3 = #{final_time_task_3},
		final_time_task_4 = #{final_time_task_4},
		scheduled =
		#{id_scheduled}
		where id = #{id}

	</update>





</mapper>


