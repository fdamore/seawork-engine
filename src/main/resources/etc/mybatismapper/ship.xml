<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ship">

	<cache />

	<insert id="createShip" parameterType="org.uario.seaworkengine.model.Ship">
		INSERT INTO ship (name, line, shiptype, shipcondition, twtype, nowork, activityh)
		VALUES
		(#{name}, #{line}, #{shiptype}, #{shipcondition}, #{twtype} , #{nowork}, #{activityh});
	</insert>
	
	<delete id="deleteShip" parameterType="Integer">
		delete from
		ship
		where
		id = #{id_ship}
	</delete>
	
	<select id="loadShip" parameterType="Integer" resultType="org.uario.seaworkengine.model.Ship">
		SELECT id, name, line, shiptype, shipcondition, twtype, nowork, activityh
		FROM
		ship where
		id = #{id_ship};		
	</select>
	
	<select id="listAllNameShip" resultType="String">
		SELECT DISTINCT name
		FROM ship
		order by name;
	</select>
	
	
	
	<select id="loadAllShip" resultType="org.uario.seaworkengine.model.Ship">
		SELECT id, name, line, shiptype, shipcondition, twtype, nowork, activityh
		FROM ship
		order by name;		
	</select>
	
	<select id="selectAllShipFulltextSearchLike" parameterType="String"
		resultType="org.uario.seaworkengine.model.Ship">
		SELECT id, name, line, shiptype, shipcondition, twtype, nowork, activityh
		FROM
		ship
		<if test="my_full_text_search != null">
			WHERE (
			name like CONCAT('%', #{my_full_text_search}, '%') or
			line like CONCAT('%', #{my_full_text_search}, '%') or
			shiptype like CONCAT('%', #{my_full_text_search}, '%') or
			shipcondition like CONCAT('%', #{my_full_text_search}, '%') or
			twtype like CONCAT('%',	#{my_full_text_search}, '%')
			)
		</if>
		order by name;
	</select>
	
	<update id="updateShip" parameterType="org.uario.seaworkengine.model.Ship" >
		UPDATE ship SET
		name = #{name},
		line = #{line},
		shiptype = #{shiptype},
		shipcondition = #{shipcondition},
		twtype = #{twtype},
		nowork = #{nowork}, 
		activityh = #{activityh}  
		WHERE id = #{id}
	</update>
	
	<update id="setShipAsNoWork" parameterType="org.uario.seaworkengine.model.Ship">
		UPDATE ship SET
		nowork = 1 
		where id = #{id};
	</update>
		
	<update id="setShipAsActivityH" parameterType="org.uario.seaworkengine.model.Ship">
		UPDATE ship SET
		activityh = 1 
		where id = #{id};
	</update>
	
	<select id="getNoWorkShip" resultType="org.uario.seaworkengine.model.Ship">
		SELECT id, name, line, shiptype, shipcondition, twtype, nowork, activityh
		from ship 
		where nowork = 1;
	</select>
	
	<select id="getActivityHShip" resultType="org.uario.seaworkengine.model.Ship">
		SELECT id, name, line, shiptype, shipcondition, twtype, nowork, activityh
		from ship 
		where activityh = 1;
	</select>
	
	
</mapper>